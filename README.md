# LRC Video Generator (歌词视频生成器)



**一款强大而直观的工具，旨在将您的音乐、歌词和专辑封面无缝融合，创造出具有专业水-准的卡拉OK或动态歌词视频。**

本工具通过一个清爽的图形用户界面 (GUI)，让复杂的视频合成过程变得简单。您无需学习专业的视频编辑软件，只需提供音频、LRC歌词和封面图片，选择您喜爱的动画效果，即可一键生成高质量的歌词视频。



## ✨ 核心功能



- **直观的图形界面**: 基于 PySide6 构建，提供现代、易用的操作体验。所有功能触手可及。
- **工程化管理**: 支持保存和加载项目 (`.kproj` 文件)，方便您随时中断和恢复工作，无需重复设置。
- **实时效果预览**: 在最终渲染前，可随时预览视频在任意时间点的静态画面，帮助您快速调整动画、字体和颜色，直到效果满意为止。
- **智能色彩提取**: 自动从您的封面图片中分析并提取出最佳的主色、辅色和描边色，一键应用到歌词样式，确保视觉和谐统一。 (需要 `Pillow` 和 `scikit-learn` 库)
- **丰富的可定制动画**:
  - **背景动画**: 内置“静态模糊”、“动态渐变波浪”等多种背景效果。
  - **歌词动画**: 提供“淡入淡出”、“滚动列表”等多种精美的歌词展示动画。
  - **封面动画**: 可选择“静态展示”或模拟“黑胶唱片旋转”效果，增添复古格调。
- **高性能视频编码**:
  - **硬件加速**: 全面支持 **NVIDIA (NVENC)**, **AMD (AMF)**, 和 **Intel (QSV)** 硬件编码，极大缩短视频渲染时间。
  - **高质量输出**: 默认使用 `libx264` 编码器，确保视频质量和兼容性，并生成高比特率 (320k AAC) 的音频流。



## 📋 环境依赖



在运行本工具前，请确保您的系统已安装以下依赖：

1. **[FFmpeg](https://ffmpeg.org/download.html)**: **必需项**。这是视频处理的核心。

   - 请下载并安装 FFmpeg。
   - **强烈建议**将其路径添加到系统环境变量中。
   - 如果无法添加，也可以在软件的“高级设置”里手动指定 `ffmpeg` 可执行文件的完整路径。
   - 请确保 `ffprobe` 可执行文件与 `ffmpeg` 在同一目录下。

2. **Python**: 推荐使用 3.10 或更高版本。

3. **Python 库**: 可以通过 `pip` 进行安装。

   Bash

   ```
   pip install PySide6 Pillow scikit-learn numpy
   ```

   - `PySide6`: GUI 框架。
   - `Pillow`: 用于图像处理，是“智能色彩提取”功能的核心。
   - `scikit-learn`: 用于颜色聚类，是“智能色彩提取”功能的核心。
   - `numpy`: scikit-learn的依赖项，用于进行科学计算。

4. **字体文件**:

   - 请将您希望在视频中使用的字体文件（如 `.ttf` 或 `.otf` 格式）放入程序根目录下的 `font` 文件夹中。



## 🚀 快速开始



1. **启动程序**: 下载项目后，运行 `main.py` 文件启动图形界面。

   Bash

   ```
   python main.py
   ```

2. **加载文件或工程**:

   - **新项目**: 点击“浏览...”按钮，依次选择您的 **音频文件** (`.mp3`, `.wav` 等)、**封面图片** (`.jpg`, `.png` 等) 和 **LRC歌词文件**。
   - **恢复工作**: 点击“加载工程”按钮，选择之前保存的 `.kproj` 文件。

3. **自定义样式与动画**:

   - 在“样式与动画”区域，通过下拉菜单选择您喜欢的背景、歌词和封面动画。
   - 点击 **“从封面提取颜色”** 按钮，让程序为您自动搭配颜色。
   - 您也可以手动调整主/次歌词的字体、字号、颜色以及描边的颜色和宽度。

4. **预览效果**:

   - 拖动“实时预览”区域的时间滑块，选择一个您想预览的歌词时间点。
   - 点击 **“生成预览”** 按钮，右侧将显示当前设置下的画面快照。

5. **生成视频**:

   - 一切满意后，点击 **“开始生成视频”** 按钮。
   - 在弹出的对话框中设置视频的保存路径和文件名。
   - 程序将开始渲染视频，您可以在界面底部的日志窗口看到实时的处理进度和 FFmpeg 输出。



## 📂 项目结构



```
LRC-Video-Generator/
├── main.py                # 程序主入口
├── main_ui.py             # GUI界面和用户交互
├── ui_components.py       # UI组件生成模块
├── video_processor.py     # 核心视频处理模块，构建并调用FFmpeg命令
├── animations.py          # 定义所有动画效果的FFmpeg滤镜
├── lrc_parser.py          # LRC歌词文件解析器
├── color_extractor.py     # 从封面图片提取主色调的模块
├── workers.py             # 后台工作线程模块
├── requirements.txt       # Python 依赖项列表
├── README.md              # 本说明文件
└── font/                    # (建议) 存放自定义字体文件的目录
```



## ⚠️ 故障排除



- **问题: 程序提示 "未找到 FFmpeg" 或无法生成视频/预览。**
  - **解决方案**: 这是最常见的问题。请确保您已正确安装 FFmpeg，并已将其路径添加到系统环境变量中。如果问题仍然存在，请在软件的“高级设置”中手动指定 `ffmpeg` 可执行文件的**完整路径** (例如 `C:/ffmpeg/bin/ffmpeg.exe`)。
- **问题: “从封面提取颜色”按钮为灰色/不可用。**
  - **解决方案**: 此功能需要 `Pillow` 和 `scikit-learn` 库的支持。请通过 `pip install Pillow scikit-learn` 命令安装它们。
- **问题: 视频生成速度很慢。**
  - **解决方案**: 请在“高级设置”的“硬件加速”下拉菜单中，选择与您的显卡匹配的选项（NVIDIA, AMD, Intel）。使用硬件加速可以显著提升渲染速度。



## ⚖️ 许可协议 (License)





### 软件源代码



本项目的源代码采用 **MIT License** 进行许可。详情请参阅项目根目录下的 `LICENSE` 文件。



### 生成的视频内容



使用本软件生成的视频内容默认采用 **知识共享署名 4.0 国际 (CC BY 4.0)** 许可协议。

这意味着，当您发布、分享或修改任何由本软件生成的视频时，您 **必须** 提供清晰、适当的署名。我们推荐您在视频简介或视频画面中包含以下文字：

> **视频使用“LRC Video Generator”制作，项目地址：[https://github.com/SkyDream01/LRC-Video-Generator]**



## 📝 免责声明 (Disclaimer)



1. **无保证**: 本软件按“原样”提供，不提供任何形式的明示或暗示的保证。作者或版权持有人不对任何人因使用本软件所产生的任何索赔、损害或其他责任负责。
2. **内容责任**: 用户在使用本软件时，应自行承担全部责任，确保所使用的所有素材（包括但不限于音频、封面图片、歌词文件等）均已获得合法的版权授权，或符合相关法律法规的合理使用规定。
3. **版权侵权**: 本软件仅作为一个工具，其开发者不对任何用户因使用本软件生成、发布、传播的内容所导致的版权侵权问题承担任何法律及连带责任。所有因内容版权产生的纠纷和后果，均由用户自行承担。
4. **使用风险**: 您明确同意，使用本软件的风险由您自行承担。

**请在使用本软件前，仔细阅读并理解以上声明。继续使用本软件，即表示您已同意并接受本许可协议及免责声明的全部内容。**